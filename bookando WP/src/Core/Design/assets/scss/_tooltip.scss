// _tooltip.scss
@use 'sass:map';
@use 'variables' as *;

// ----------------------------------------------------
// Bookando Tooltip (global)
// - nutzt ausschließlich Werte/Maps aus _variables.scss
// - unterstützt Rich-Content (Grid/Head/Padding-Utilities)
// - Fade-Transition-Klassen für <transition name="bookando-tooltip-fade">
// - Positionsklassen: .pos-top|.pos-bottom|.pos-left|.pos-right
//   (Legacy-Alias .top/.bottom wird ebenfalls unterstützt)
// - Theme-Modifier: .bookando-tooltip--light / --dark
// ----------------------------------------------------

// Wrapper: inline-Element, das den Trigger umfasst
.bookando-tooltip-wrapper {
  position: relative;
  display: inline-flex;
  align-items: center;
}

// Basispanel
.bookando-tooltip {
  position: absolute;
  // Layout
  min-width: max-content;
  max-width: 420px; // bewusst etwas großzügiger für Rich-Content
  padding: map.get($bookando-spacing, xxs) map.get($bookando-spacing, sm);
  border-radius: map.get($bookando-radius-sizes, sm);
  border: map.get($bookando-border-widths, md) solid $bookando-border;
  box-shadow: map.get($bookando-shadows, 2);
  pointer-events: none; // rein informativ
  white-space: normal;  // erlaubt Umbrüche für Rich-Content
  text-align: left;
  z-index: map.get($bookando-z-utilities, overlay); // über Popovers, unter Modals

  // Typografie
  font-family: $bookando-font-family;
  font-size: $bookando-font-size-sm;
  line-height: 1.35;
  font-weight: $bookando-font-weight-normal;

  // Standard-Theme (Dark) – bessere Lesbarkeit
  background: $bookando-dark;
  color: $bookando-white;
  opacity: 0.98;

  // Thema: Light
  &.bookando-tooltip--light {
    background: $bookando-bg-gray-100;
    color: $bookando-text-dark;
    border-color: $bookando-border;
  }

  // Thema: Dark explizit (falls per Klasse gesetzt)
  &.bookando-tooltip--dark {
    background: $bookando-dark;
    color: $bookando-white;
    border-color: $bookando-border-dark;
  }
}

// ---------------------------
// Positionierung
// ---------------------------
// Hauptachsen: top/bottom/left/right (neue Syntax)
.bookando-tooltip.pos-top {
  left: 50%;
  bottom: calc(100% + #{map.get($bookando-spacing, xs)});
  transform: translateX(-50%);
}

.bookando-tooltip.pos-bottom {
  left: 50%;
  top: calc(100% + #{map.get($bookando-spacing, xs)});
  transform: translateX(-50%);
}

.bookando-tooltip.pos-left {
  right: calc(100% + #{map.get($bookando-spacing, xs)});
  top: 50%;
  transform: translateY(-50%);
}

.bookando-tooltip.pos-right {
  left: calc(100% + #{map.get($bookando-spacing, xs)});
  top: 50%;
  transform: translateY(-50%);
}

// Legacy-Aliasse (falls irgendwo noch .top/.bottom verwendet wird)
.bookando-tooltip.top    { @extend .bookando-tooltip, .pos-top; }
.bookando-tooltip.right  { @extend .bookando-tooltip, .pos-right; }
.bookando-tooltip.bottom { @extend .bookando-tooltip, .pos-bottom; }
.bookando-tooltip.left   { @extend .bookando-tooltip, .pos-left; }

// ---------------------------
// Transition (Vue <transition name="bookando-tooltip-fade">)
// ---------------------------
.bookando-tooltip-fade-enter-active,
.bookando-tooltip-fade-leave-active {
  transition:
    opacity map.get($bookando-duration-utilities, 200) ease,
    transform map.get($bookando-duration-utilities, 200) ease;
}
.bookando-tooltip-fade-enter-from,
.bookando-tooltip-fade-leave-to {
  opacity: 0;
  transform: translateY(2px);
}

// ---------------------------
// Rich-Content Helper (für Slot-Content in Tooltips)
// ---------------------------
// 2-Spalten-Grid für "Dienstleistungen | Orte"
.bookando-tooltip-grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: map.get($bookando-spacing, xxs) map.get($bookando-spacing, sm);
}

// Kompakte Innen-Padding-Variante (zusätzlich zur Basis-Padding)
.bookando-tooltip-p-sm {
  padding: map.get($bookando-spacing, xxs) map.get($bookando-spacing, sm);
}

// Headline im Tooltip-Panel
.bookando-tooltip-head {
  font-weight: $bookando-font-weight-semi-bold;
  color: inherit;
  opacity: .92;
  margin-bottom: map.get($bookando-spacing, xxxs);
}

// ---------------------------
// Darkmode (optional):
// Falls ihr mit .theme-dark / [data-theme="dark"] arbeitet, bleibt
// der Standard (dark) konsistent. Für Light-Tooltips im Darkmode
// kann gezielt .bookando-tooltip--light gesetzt werden.
// ---------------------------
.theme-dark, [data-theme="dark"] {
  .bookando-tooltip {
    background: $bookando-bg-dark;
    color: $bookando-white;
    border-color: $bookando-border-dark;
  }
  .bookando-tooltip.bookando-tooltip--light {
    background: $bookando-bg-light;
    color: $bookando-text-dark;
    border-color: $bookando-border;
  }
}

// ---------------------------
// (Optional) Pfeil / Arrow – falls benötigt:
// -> bewusst weggelassen, um Layouts schlank zu halten.
//    Ein Arrow kann via ::after + border-trick nachgerüstet werden,
//    idealerweise als eigener Modifier (.bookando-tooltip--arrow).
// ---------------------------
