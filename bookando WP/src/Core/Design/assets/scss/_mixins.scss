  // Bookando Mixins – Wiederverwendbare SCSS-Snippets für UI/UX (perfekt 2025-ready)
  // Wichtig: Alle normalen Styles vor verschachtelten Selektoren!
  @use 'sass:map';
  @use 'sass:color';
  @use 'sass:math';
  @use 'variables' as *;

  // --- UNIVERSAL: Utility-Driven Mixins ---
  @mixin bookando-font-size($size-key) {
    font-size: map.get($bookando-font-size-utilities, $size-key);
  }
  @mixin bookando-radius($size-key) {
    border-radius: map.get($bookando-radius-sizes, $size-key);
  }
  @mixin bookando-spacing($property, $size-key) {
    #{$property}: map.get($bookando-spacing, $size-key);
  }

  // --- SHADOWS ---
  @mixin bookando-shadow($level: 1) {
    box-shadow: map.get($bookando-shadows, $level);
  }

  // --- FLEXBOX ---
  @mixin flex-center {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  // --- ROUNDED (Legacy, besser: bookando-radius) ---
  @mixin rounded($radius: $bookando-radius) {
    border-radius: $radius;
  }
  @mixin rounded-full {
    border-radius: 9999px;
  }

  // --- TEXT ELLIPSIS ---
  @mixin ellipsis {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  // --- CONTENT-ROW ---
  @mixin bookando-content-row {
    flex: 1;
    display: flex;
    align-items: center;
    gap: map.get($bookando-spacing, xs);
    overflow: hidden;
  }

  // --- SPACING (margin & padding) LEGACY (nutze besser bookando-spacing) ---
  @mixin spacing($top: 0, $right: 0, $bottom: 0, $left: 0) {
    margin: $top $right $bottom $left;
  }
  @mixin padding($top: 0, $right: 0, $bottom: 0, $left: 0) {
    padding: $top $right $bottom $left;
  }

  // --- VISUALLY HIDDEN ---
  @mixin visually-hidden {
    position: absolute !important;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
  }

  // --- RESPONSIVE MEDIA-QUERIES ---
  // Einheitliche, mobile-first Mixins
  @mixin bp-up($key) {
    @media (min-width: map.get($bookando-breakpoints, $key)) { @content; }
  }
  @mixin bp-down($key) {
    @media (max-width: map.get($bookando-breakpoints, $key)) { @content; }
  }
  @mixin bp-between($from, $to) {
    @media (min-width: map.get($bookando-breakpoints, $from)) and (max-width: map.get($bookando-breakpoints, $to)) {
      @content;
    }
  }

  // Legacy-Alias (für bestehenden Code)
  @mixin respond-to($key) { @include bp-down($key) { @content; } }

  // --- HIDE SCROLLBAR ---
  @mixin hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
    &::-webkit-scrollbar {
      display: none !important;
    }
  }

  // --- BUTTON PATTERNS ---
  @mixin bookando-btn-disabled {
    &:disabled,
    &.is-disabled {
      opacity: 0.55;
      cursor: not-allowed;
      pointer-events: none;
      box-shadow: none;
      background: $bookando-gray-200 !important;
      color: $bookando-gray-500 !important;
      border-color: $bookando-gray-200 !important;
    }
  }

  @mixin bookando-btn-pagination {
    min-width: 2.5rem;
    padding: map.get($bookando-spacing, xs) map.get($bookando-spacing, sm);
    border-radius: $bookando-radius;
    border: $bookando-border-width-sm solid $bookando-border-light;
    background: $bookando-white;
    color: $bookando-text;
    font-weight: $bookando-font-weight-semi-bold;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.15s, color 0.15s;

    &:hover:not(:disabled),
    &:focus:not(:disabled) {
      background-color: $bookando-primary;
      color: $bookando-text;
      outline: none;
    }

    &:disabled,
    &.is-disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }

    &.is-active {
      background-color: $bookando-primary;
      color: $bookando-white;
      cursor: default;
      pointer-events: none;
    }
  }

  @mixin bookando-btn-bulk {
    margin-inline: 0;

    &.bookando-btn--success {
      margin-inline-end: map.get($bookando-spacing, sm);
      order: 1;
      @include bookando-shadow(1);
    }

    &.bookando-btn--danger {
      margin-inline-start: map.get($bookando-spacing, sm);
      order: 2;
      @include bookando-shadow(1);
    }
  }

  // --- FIELD BASE (Basis für Controls) ---
  @mixin bookando-field-base($variant: null) {
    font-size: map.get($bookando-font-size-utilities, base);
    font-family: $bookando-font-family;
    color: $bookando-field-color;
    box-sizing: border-box;
    transition: all 0.2s ease;
    align-items: center;

    @if $variant == 'sm' {
      font-size: map.get($bookando-font-size-utilities, sm);
      height: $bookando-field-height-sm;
    } @else if $variant == 'lg' {
      font-size: map.get($bookando-font-size-utilities, lg);
      height: $bookando-field-height-lg;
    } @else if $variant == 'danger' {
      background: color.scale($bookando-danger, $lightness: 70%);
      color: $bookando-danger;
    }

    &::placeholder {
      color: $bookando-text-muted;
    }
    &:disabled {
      background: $bookando-field-disabled-bg;
      color: $bookando-field-disabled-color;
      cursor: not-allowed;
    }
    &:hover {
      border-color: $bookando-border-dark;
      box-shadow: 0 0 0 2px rgba($bookando-border-dark, 0.12);
    }
    &:focus,
    &:focus-within {
      border-color: $bookando-primary;
      box-shadow: 0 0 0 2px rgba($bookando-primary, 0.12);
      outline: none;
    }
  }

  // --- INPUT RESET (ohne Style) ---
  @mixin bookando-input-reset {
    padding: 0;
    margin: 0;
    border: none;
    background: transparent;
    height: 100%;
    font-size: inherit;
    line-height: 1;
    outline: none;
  }

  // --- FIELD WRAPPER ---
  @mixin bookando-field-wrapper($variant: null) {
    @include bookando-field-base($variant);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: map.get($bookando-spacing, sm);
    cursor: pointer;
    width: 100%;
    text-align: left;

    .label-wrapper {
      flex: 1;
      @include ellipsis;
    }
    .flag {
      font-size: map.get($bookando-font-size-utilities, sm);
      min-width: 1.3em;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      vertical-align: middle;
    }
    .dial {
      font-size: map.get($bookando-font-size-utilities, sm);
      color: $bookando-text-muted;
      min-width: 46px;
      text-align: right;
      margin-left: auto;
    }
    .bookando-chevron {
      width: 1em;
      height: 1em;
      opacity: 0.6;
      background: url('#{$bookando-icon-path}chevron-down.svg') no-repeat center;
      background-size: contain;
    }
    .bookando-clear {
      width: 1em;
      height: 1em;
      opacity: 0.6;
      background: url('#{$bookando-icon-path}x.svg') no-repeat center;
      background-size: contain;
    }
  }

  // --- COMBOFIELD-WRAPPER (Telefonnummer, Combobox etc.) ---
  @mixin bookando-combofield-wrapper($variant: null) {
    @include bookando-field-base($variant);
    display: flex;
    align-items: center;
    width: 100%;
    padding: 0;
    overflow: hidden;
  }

  // --- COMBOBOX-BUTTON-BASIS ---
  @mixin bookando-combobox-btn-base {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: map.get($bookando-spacing, sm);
    font-size: map.get($bookando-font-size-utilities, base);
    min-height: var(--field-height, $bookando-field-height);
    height: var(--field-height, $bookando-field-height);
    border: map.get($bookando-border-widths, sm) solid $bookando-border;
    border-radius: map.get($bookando-radius-sizes, sm);
    background: $bookando-field-bg;
    color: $bookando-field-color;
    gap: map.get($bookando-spacing, sm);
    transition: background 0.15s, border-color 0.18s;
    cursor: pointer;
    box-sizing: border-box;
    position: relative;
    line-height: 1rem;
  }

  // --- BUTTON ---
  @mixin bookando-btn($variant: null) {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: map.get($bookando-spacing, xs);
    height: $bookando-field-height;
    padding: 0 map.get($bookando-spacing, md);
    border: none;
    border-radius: map.get($bookando-radius-sizes, md);
    font-size: map.get($bookando-font-size-utilities, base);
    font-family: $bookando-font-family;
    font-weight: 600;
    cursor: pointer;
    box-shadow: none;
    transition: background 0.2s, color 0.2s, box-shadow 0.2s;

    @if $variant == 'primary' or $variant == null {
      background: $bookando-primary;
      color: $bookando-white;
      &:hover:not(:disabled) {
        background: color.adjust($bookando-primary, $lightness: -7%);
        box-shadow: 0 2px 8px rgba(16, 40, 60, 0.12);
      }
    } @else if $variant == 'secondary' {
      background: $bookando-secondary;
      color: $bookando-text-dark;
      &:hover:not(:disabled) {
        background: color.adjust($bookando-secondary, $lightness: 4%);
      }
    } @else if $variant == 'success' {
      background: $bookando-success;
      color: $bookando-white;
      &:hover:not(:disabled) {
        background: color.adjust($bookando-success, $lightness: -7%);
      }
    } @else if $variant == 'danger' {
      background: $bookando-danger;
      color: $bookando-white;
      &:hover:not(:disabled) {
        background: color.adjust($bookando-danger, $lightness: -8%);
      }
    }

    &:disabled {
      opacity: 0.55;
      cursor: not-allowed;
      pointer-events: none;
      background: $bookando-gray-200 !important;
      color: $bookando-gray-500 !important;
    }
  }

  // --- FIELD BUTTON ---
  @mixin bookando-field-button($variant: null) {
    @include bookando-input-reset;
    @include bookando-field-wrapper($variant);
  }

  // --- CHECKBOX (ohne Label) ---
  @mixin bookando-checkbox($size: $bookando-checkbox-size-default) {
    appearance: none;
    width: $size !important;
    height: $size !important;
    border: 1px solid $bookando-border;
    border-radius: $bookando-checkbox-border-radius;
    background: $bookando-white;
    display: inline-block;
    position: relative;
    vertical-align: middle;
    cursor: pointer;

    &:checked {
      background-color: $bookando-primary;
      border-color: $bookando-primary;
      background-image: url('#{$bookando-icon-path}check.svg');
      background-repeat: no-repeat;
      background-position: center;
      background-size: 70%;
    }
    &:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba($bookando-primary, 0.3);
    }
  }

  // --- MULTISELECT TRIGGER ---
  @mixin bookando-multiselect-trigger($variant: null) {
    @include bookando-combofield-wrapper($variant);
    padding: 0 map.get($bookando-spacing, sm);
    justify-content: space-between;
    gap: map.get($bookando-spacing, sm);

    .content-wrapper {
      flex: 1;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: map.get($bookando-spacing, xs);
      overflow: hidden;
    }
    .placeholder {
      color: $bookando-text-muted;
      line-height: 1.4;
    }
    .bookando-chevron {
      flex-shrink: 0;
    }
    .bookando-clear {
      flex-shrink: 0;
    }
  }

  // --- GLOBAL FLAG ---
  @mixin bookando-flag {
    font-size: x-large;
    min-width: 1.3em;
    text-align: center;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
  }

  // --- ERROR STYLE ---
  @mixin bookando-error-style {
    border-color: $bookando-danger !important;
    background: color.scale($bookando-danger, $lightness: 85%) !important;
    color: $bookando-danger !important;
    box-shadow: 0 0 0 2px rgba($bookando-danger, 0.2);
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  // --- ICON-UTILITY-KLASSEN ---
  @mixin bookando-icon-utilities {
    // Größen
    @each $name, $size in $bookando-icon-sizes {
      .bookando-icon--#{$name} {
        width: $size !important;
        height: $size !important;
        min-width: $size !important;
        min-height: $size !important;
        max-width: $size !important;
        max-height: $size !important;
      }
    }
    // Farben
    @each $name, $color in $bookando-icon-colors {
      .bookando-icon--#{$name} {
        color: $color !important;
      }
    }
    // Filter (für SVG-IMG)
    @each $context, $filter in $bookando-icon-filters {
      .bookando-icon-#{$context} {
        filter: $filter !important;
      }
    }
  }

  // ===========================
  // ✏ CSS Root Variablen (für JS & Runtime-Nutzung)
  // ===========================
  @mixin bookando-export-css-vars() {
    :root {
      --field-bg: #{$bookando-field-bg};
      --field-color: #{$bookando-field-color};
      --field-border: #{$bookando-field-border};
      --field-disabled-bg: #{$bookando-field-disabled-bg};
      --field-disabled-color: #{$bookando-field-disabled-color};
      --form-bg: #{$bookando-bg};
      --bookando-field-gap: #{$bookando-spacing-sm};

      /* Breakpoints unitless (px) – ideal für JS & calc() */
      --bookando-breakpoint-sm: #{math.div($bookando-breakpoint-sm, 1px)};
      --bookando-breakpoint-md: #{math.div($bookando-breakpoint-md, 1px)};
      --bookando-breakpoint-lg: #{math.div($bookando-breakpoint-lg, 1px)};
      --bookando-breakpoint-xl: #{math.div($bookando-breakpoint-xl, 1px)};
    }
  }