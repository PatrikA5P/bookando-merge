// _button.scss
@use 'sass:map';
@use 'sass:color';
@use 'variables' as *;
@use 'mixins' as *;

/* ==================================================
   Bookando Button-System (Utility + Modifier-Prinzip)
   ==================================================
   - Varianten: primary, secondary, accent, danger, success, standard, muted, outline, ghost, link
   - Größen:   small, default, large, square (kombinierbar!)
   - Typen:    icononly, textonly, full (z. B. nur Icon, nur Text, Icon+Text)
   ================================================== */

// -------------------------------
// 1. Standard-Button-Basis
// -------------------------------
.bookando-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: $bookando-spacing-xs;
  height: $bookando-field-height;
  min-height: $bookando-field-height;
  padding: 0 $bookando-spacing-md;
  border: none;
  border-radius: $bookando-radius-sm;
  font-size: $bookando-font-size-base;
  font-family: $bookando-font-family;
  font-weight: $bookando-font-weight-semi-bold;
  cursor: pointer;
  background: $bookando-primary;
  color: $bookando-white;
  box-shadow: none;
  min-width: 2.5em;
  transition: background 0.18s, color 0.18s, border-color 0.18s, box-shadow 0.16s;

  &:focus {
    box-shadow: 0 0 0 4px rgba($bookando-primary, 0.13);
    outline: none;
  }
  &:active {
    transform: translateY(1px) scale(0.98);
  }
  @include bookando-btn-disabled;
}

// -------------------------------
// 2. Größen-Modifier
// -------------------------------
.bookando-btn--small {
  height: $bookando-field-height-sm;
  min-height: $bookando-field-height-sm;
  padding: 0 $bookando-spacing-sm;
  font-size: $bookando-font-size-sm;
}
.bookando-btn--large {
  height: $bookando-field-height-lg;
  min-height: $bookando-field-height-lg;
  padding: 0 $bookando-spacing-lg;
  font-size: $bookando-font-size-lg;
}
// "dynamic": Kein Extra-Modifier – Default (wächst mit Content)

// --------------------------------------
// 3. Square-Button (z.B. reine Icon-Buttons)
// --------------------------------------
.bookando-btn--square {
  width: $bookando-field-height;
  min-width: $bookando-field-height;
  height: $bookando-field-height;
  min-height: $bookando-field-height;
  aspect-ratio: 1/1;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  &.bookando-btn--large {
    width: $bookando-field-height-lg;
    height: $bookando-field-height-lg;
    min-width: $bookando-field-height-lg;
    min-height: $bookando-field-height-lg;
  }
  &.bookando-btn--small {
    width: $bookando-field-height-sm;
    height: $bookando-field-height-sm;
    min-width: $bookando-field-height-sm;
    min-height: $bookando-field-height-sm;
  }
}

// --------------------------------------
// 4. Button-Varianten (Farb-/Style-Modifier)
// --------------------------------------

// 4.1 Primary
.bookando-btn--primary {
  background: $bookando-primary;
  color: $bookando-white;
  &:hover:not(:disabled) {
    background: color.adjust($bookando-primary, $lightness: -7%);
    box-shadow: 0 2px 8px rgba(16, 40, 60, 0.12);
  }
}

// 4.2 Secondary
.bookando-btn--secondary {
  background: $bookando-secondary;
  color: $bookando-text;
  border: 1.5px solid $bookando-border;
  &:hover:not(:disabled) {
    background: color.adjust($bookando-secondary, $lightness: -7%);
  }
}

// 4.3 Accent (z.B. blau)
.bookando-btn--accent {
  background: $bookando-accent;
  color: $bookando-white;
  &:hover:not(:disabled) {
    background: color.adjust($bookando-accent, $lightness: -6%);
  }
}

// 4.4 Danger
.bookando-btn--danger {
  background: $bookando-danger;
  color: $bookando-white;
  &:hover:not(:disabled) {
    background: color.adjust($bookando-danger, $lightness: -8%);
  }
}

// 4.5 Success
.bookando-btn--success {
  background: $bookando-success;
  color: $bookando-white;
  &:hover:not(:disabled) {
    background: color.adjust($bookando-success, $lightness: -7%);
  }
}

// 4.6 Standard (neutral, "default"-UI)
.bookando-btn--standard {
  background: $bookando-bg-light;
  color: $bookando-text-dark;
  border: 1.5px solid $bookando-border;
  &:hover:not(:disabled) {
    background: $bookando-primary-light;
    color: $bookando-primary;
    border-color: $bookando-primary;
  }
}

// 4.7 Muted (zurückhaltend, nicht "default")
.bookando-btn--muted {
  background: transparent;
  color: $bookando-text-muted;
  border: 2px solid $bookando-border;
  &:hover:not(:disabled) {
    background: $bookando-bg-muted;
    color: $bookando-primary;
    border-color: $bookando-primary;
  }
}

// 4.8 Outline
.bookando-btn--outline {
  background: transparent;
  border: 2px solid $bookando-primary;
  color: $bookando-primary;
  &:hover:not(:disabled) {
    background: $bookando-primary;
    color: $bookando-white;
    border-color: $bookando-primary-dark;
  }
}

// 4.9 Ghost
.bookando-btn--ghost {
  background: transparent !important;
  color: $bookando-primary;
  border: none;
  text-decoration: underline;
  box-shadow: none;
  &:hover:not(:disabled) {
    color: $bookando-primary-dark;
    background: color.adjust($bookando-primary-light, $lightness: 5%);
    text-decoration: underline;
  }
}

// 4.10 Link
.bookando-btn--link {
  background: none !important;
  color: $bookando-primary !important;
  border: none;
  box-shadow: none !important;
  text-decoration: underline;
  font-weight: $bookando-font-weight-semi-bold;
  padding: 0;
  min-width: unset;
  height: unset;
  &:hover,
  &:focus {
    color: $bookando-primary-dark !important;
    text-decoration: underline;
    background: none !important;
    box-shadow: none !important;
  }
  &:disabled {
    color: $bookando-gray-400 !important;
    pointer-events: none;
    opacity: 0.65;
  }
}

// 4.11 Clear
.bookando-btn--clear {
  background: none !important;
  color: $bookando-text !important;
  border: none;
  box-shadow: none !important;
  font-weight: $bookando-font-weight-semi-bold;
  padding: 0;
  min-width: unset;
  height: unset;
  &:hover,
  &:focus {
    background: none !important;
    box-shadow: none !important;
  }
  &:disabled {
    color: $bookando-text-muted !important;
    pointer-events: none;
    opacity: 0.65;
  }
}


// ------------------------------------
// 5. Spezial: Square-Button-Varianten
// ------------------------------------

// Du kannst JEDEN Style mit "square" kombinieren (BEM-Style):
// Beispiel: .bookando-btn--square.bookando-btn--muted

.bookando-btn--square.bookando-btn--accent {
  background: transparent;
  border: 2px solid $bookando-accent;
  color: $bookando-accent;
  .bookando-icon { color: inherit; }
  // FOKUS: Wie normal!
  &:focus {
    background: transparent;
    border-color: $bookando-accent;
    color: $bookando-accent;
    box-shadow: none;
    outline: none;
    .bookando-icon { color: inherit; }
  }
  // HOVER: Farbumschlag
  &:hover {
    background: $bookando-primary-light;
    border-color: $bookando-primary-dark;
    color: $bookando-primary-dark;
    .bookando-icon { color: $bookando-primary-dark; }
  }
}

// --------------------------------------
// 6. Kontext-Modifier
// --------------------------------------

.bookando-btn--bulk {
  @include bookando-btn-bulk;
}

.bookando-btn--pagination {
  @include bookando-btn-pagination;
}

.bookando-btn--square.bookando-btn--standard {
  background: transparent;
  border: 1.5px solid $bookando-border;
  color: $bookando-text-dark;
  .bookando-icon { color: inherit; }
  &:focus {
    background: transparent;
    border-color: $bookando-border;
    color: $bookando-text-dark;
    box-shadow: none;
    outline: none;
    .bookando-icon { color: inherit; }
  }
  &:hover {
    background: $bookando-primary-light;
    border-color: $bookando-primary;
    color: $bookando-primary;
    .bookando-icon { color: $bookando-primary; }
  }
}

.bookando-btn--square.bookando-btn--muted {
  background: transparent;
  border: 2px solid $bookando-border;
  color: $bookando-text-muted;
  .bookando-icon { color: inherit; }
  &:focus {
    background: transparent;
    border-color: $bookando-border;
    color: $bookando-text-muted;
    box-shadow: none;
    outline: none;
    .bookando-icon { color: inherit; }
  }
  &:hover {
    background: $bookando-bg-muted;
    border-color: $bookando-primary;
    color: $bookando-primary;
    .bookando-icon { color: $bookando-primary; }
  }
}

.bookando-btn--square.bookando-btn--danger {
  background: transparent;
  border: 2px solid $bookando-danger;
  color: $bookando-danger;
  .bookando-icon { color: inherit; }
  &:focus {
    background: transparent;
    border-color: $bookando-danger;
    color: $bookando-danger;
    box-shadow: none;
    outline: none;
    .bookando-icon { color: inherit; }
  }
  &:hover {
    background: color.scale($bookando-danger, $lightness: 85%);
    border-color: $bookando-danger;
    color: $bookando-white;
    .bookando-icon { color: $bookando-white; }
  }
}

.bookando-btn--square.bookando-btn--primary {
  background: $bookando-primary !important;
  color: $bookando-white !important;
  border: none;
  box-shadow: none;
  // Hover/Fokus wie .bookando-btn--primary
  &:hover:not(:disabled) {
    background: color.adjust($bookando-primary, $lightness: -7%);
    color: $bookando-white;
    box-shadow: 0 2px 8px rgba(16, 40, 60, 0.12);
  }
  &:focus {
    box-shadow: 0 0 0 4px rgba($bookando-primary, 0.13);
    outline: none;
  }
}

// ...bei Bedarf weitere Kombis (secondary, outline, etc.)

// ------------------------------------
// 6. Typ-Modifier (Optional!)
// ------------------------------------
// Setzt Padding, wenn nur Icon (kein Text)
.bookando-btn--icononly {
  padding: 0 !important;
  min-width: unset;
}
// Textonly: Nur für Sonderfälle (normaler Button deckt das meist schon ab)
.bookando-btn--textonly {
  // z. B. links/rechts-Spacing reduzieren, falls kein Icon
}

// ------------------------------------
// 7. Icon im Button (Größe über Utility!)
// ------------------------------------
.bookando-btn__icon {
  display: inline-flex;
  align-items: center;
  margin-right: $bookando-spacing-xs;
  &:only-child { margin: 0; }
  // Größe immer über Utility: .bookando-icon--sm/md/lg usw.
}

// ------------------------------------
// 7a. Label auf Mobile ausblenden (nur Icon zeigen)
// ------------------------------------
.bookando-btn__label--mobile-hide {
  @media (max-width: $bookando-breakpoint-sm) {
    display: none !important;
  }
}

// ------------------------------------
// 8. Block-Buttons & Gruppierung
// ------------------------------------
.bookando-btn--block {
  width: 100%;
  display: flex;
}
.bookando-btn-group {
  display: flex;
  flex-wrap: wrap;
  gap: $bookando-spacing-xs;
}
.bookando-btn-row {
  display: flex;
  align-items: center;
  gap: $bookando-spacing-xs;
}

// ------------------------------------
// 9. Ladezustand (Spinner)
// ------------------------------------
.bookando-btn--loading {
  cursor: wait;
  color: transparent !important;
  position: relative;
  &::after {
    content: "";
    position: absolute;
    inset: 0;
    margin: auto;
    width: 1.5em;
    height: 1.5em;
    border: 2px solid transparent;
    border-top-color: $bookando-white;
    border-radius: $bookando-radius-circle;
    animation: spin 1s linear infinite;
  }
}

// ------------------------------------
// 10. Utility: Spinner Keyframes
// ------------------------------------
@keyframes spin {
  100% { transform: rotate(360deg); }
}

/* ======================================
   Hinweise:
   - size="square" erzeugt quadratische Buttons.
   - size="dynamic" ist Standard (passt sich Inhalt an).
   - iconSize steuert das Icon via Utility-Klasse.
   - Typen wie icononly, textonly kannst du als Modifier kombinieren.
   - Varianten wie muted, accent, danger, primary, standard etc. stehen als Modifier zur Verfügung.
   - Für Buttons MIT Text + Icon:
     <AppButton variant="accent" icon="user" size="default" iconSize="lg">Text</AppButton>
   - Für quadratische Icon-Buttons:
     <AppButton variant="danger" size="square" icon="trash" iconSize="sm" type="icononly" />
   ====================================== */
